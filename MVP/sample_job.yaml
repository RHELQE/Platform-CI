- job-template:
    name: '{component}-{name}'
    defaults: defaults-build
    #node: 'jslave-of-your-own'
    properties:
        - ownership:
            owner: your_ID
            co-owners:
                - teammate1_ID
                - teammate2_ID
    triggers:
        - ci-trigger:
            #
            # Sample override-topic. With Unified Message Bus (UMB) support,
            # this filed is required and should be a valid, unique name, which
            # is similar to
            #     "Consumer.rh-jenkins-ci-plugin.2a28a20e-53cf-4554-b350-e671fec99b0a.VirtualTopic.qe.ci.>"
            #
            # To get a UUID, please use the handy command in the following on
            # your terminal, e.g.
            #
            # $ python3 -c "import uuid; print(str(uuid.uuid1()));"
            # f123cd1e-2108-11e8-9692-0800276a2229
            #
            override-topic: Consumer.rh-jenkins-ci-plugin.<UUID>.VirtualTopic.qe.ci.>

            # Sample job trigger for official Brew builds
            # Build NVR in $name $version $release
            jms-selector: "name = '{component}' AND CI_TYPE = 'brew-tag' AND tag LIKE '%-candidate'"

            # Sample job trigger for scratch Brew builds
            #jms-selector: "name = '{component}' AND CI_TYPE = 'brew-taskstatechange' AND scratch = true"

            # Sample job trigger for RTT_Accepted compose - other parameters may turn different in this case
            # Compose ID in $BUILD
            #jms-selector: "CI_NAME='rtt-accepted-publisher' AND TYPE='rel-eng'"
    builders:
        - shell: |
            #!/bin/bash -x

            # Here goes your shell commands for submitting beaker job here, and save the job ID into env var BKR_JOBID. E.g:
            bkr job-submit $YOUR_TEST_xml | tee $WORKSPACE/bkr_job.txt
            BKR_JOBID=`cut -d\' -f2 $WORKSPACE/bkr_job.txt`

            echo BKR_JOBID=$BKR_JOBID >> $WORKSPACE/job.properties
        - inject:
            properties-file: $WORKSPACE/job.properties
        - shell: |
            #!/bin/bash -x
            bkr job-watch $BKR_JOBID
            echo $?

- project:
    name: Platform-CI-MVP
    component: sample
    jobs:
      - '{component}-{name}'
